<!DOCTYPE html>
<html lang="en">

<head>
  <title>Movie Max Search Results</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="mmax.css">
  <script src="mmax.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body>

  <!-- Default Header with navbar from mmax.js-->
  <div id="header"></div>
  <!-- Search results -->
  <div class="container search">
    <h2>Search results for <mark>
        <script>
          if (url_query('query').length > 0) {
            document.write(toTitleCase(url_query('query')));
          } else if (url_query('actor').length > 0) {
            document.write(toTitleCase(url_query('actor')));
          } else if (url_query('director').length > 0) {
            document.write(toTitleCase(url_query('director')));
          } else if (url_query('genre').length > 0) {
            document.write(toTitleCase(url_query('genre')));
          } else if (url_query('decade').length > 0) {
            document.write(toTitleCase(url_query('decade')));
          } else if (url_query('reviews').length > 0) {
            document.write(toTitleCase(url_query('reviews')));
          } else if (url_query('price').length > 0) {
            document.write(toTitleCase(url_query('price')));
          }
        </script></mark>
    </h2>
    <!-- Search filter  -->
    <h5><a href="#filter" class="dashed" data-toggle="collapse">Advanced search</a></h5>
    <div id="filter" class="collapse shadow p-3 mb-5 bg-white">
      <form action="search.html">
        <div class="row">

          <div class="col-sm-8">
            <div class="form-group form-inline">
              <label for="query" class="col-sm-3">Movie Title:</label>
              <input type="text" class="form-control m-2 col-sm-6" id="query" name="query">
            </div>
            <div class="form-group form-inline">
              <label for="actor" class="col-sm-3">Actor:</label>
              <input type="text" class="form-control m-2 col-sm-6" id="actor" name="actor">
            </div>
            <div class="form-group form-inline">
              <label for="director" class="col-sm-3">Director:</label>
              <input type="text" class="form-control m-2 col-sm-6" id="director" name="director">
            </div>
            <div class="form-group form-inline ">
              <label for="genre" class="col-sm-3">Genre / Theme: </label>
              <input type="text" class="form-control m-2 col-sm-6" id="genre" name="genre">
            </div>
          </div>

          <div class="col-sm-4">
            <div class="form-group form-inline ">
              <label for="decade">Decade:&nbsp;&nbsp;</label>
              <input type="text" class="form-control m-2 col-sm-3" id="decade" placeholder="2000" name="decade">
            </div>
            <div class="form-group form-inline ">
              <label for="reviews">Reviews:&nbsp;</label>
              <input type="number" class="form-control m-2 col-sm-3" id="reviews"name="reviews">
            </div>
            <div class="form-group form-inline ">
              <label for="price">Max Price:</label>
              <input type="number" class="form-control m-2 col-sm-3" id="price" name="price">
            </div>
            <div class="form-group form-check"></div>
            <button type="submit" class="btn btn-primary my-2">Search</button>
          </div>

        </div>
      </form>

    </div>
    <br>
    <!-- Movie Listing -->
    <div id="moviesList"></div>
    <script src="searchImpl.js"></script>
    <script>
      if (url_query('query').length > 0) {
        getMovies(url_query('query'), 'query');
        document.getElementById('query').placeholder = toTitleCase(url_query('query'));
      } else if (url_query('actor').length > 0) {
        getMovies(url_query('actor'), 'actor');
        document.getElementById('actor').placeholder = toTitleCase(url_query('actor'));
      } else if (url_query('director').length > 0) {
        getMovies(url_query('director'), 'director');
        document.getElementById('director').placeholder = toTitleCase(url_query('director'));
      } else if (url_query('genre').length > 0) {
        getMovies(url_query('genre'), 'genre');
        document.getElementById('genre').placeholder = toTitleCase(url_query('genre'));
      } else if (url_query('decade').length > 0) {
        getMovies(url_query('decade'), 'decade');
        document.getElementById('decade').placeholder = toTitleCase(url_query('decade'));
      } else if (url_query('reviews').length > 0) {
        getMovies(url_query('reviews'), 'reviews');
        document.getElementById('reviews').placeholder = toTitleCase(url_query('reviews'));
      } else if (url_query('price').length > 0) {
        getMovies(url_query('price'), 'price');
        document.getElementById('price').placeholder = toTitleCase(url_query('price'));
      }
    </script>

  </div>

  <!-- Default Footer with links from mmax.js-->
  <div id="footer" class="row justify-content-*-center"></div>

  <script>
    if (loggedIn === 'true') {
      document.getElementById("header").innerHTML = header_loggedIn;
    } else {
      document.getElementById("header").innerHTML = header;
    }
    document.getElementById("footer").innerHTML = footer;
  </script>

</body>

</html>
