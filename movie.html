<!DOCTYPE html>
<html lang="en">

<head>
  <title>Movie Max</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="mmax.css">
  <script src="mmax.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>

<body>

  <!-- Default Header with navbar from mmax.js-->
  <div id="header"></div>

  <!-- Movie details -->
  <div class="container">

    <div class="row movie-details">
      <div class="col col-sm-4 " id="mainImage">
        <script>
          var img = document.createElement("img");
          img.src = moviePoster;
          img.className="img-fluid"
          img.alt="Movie Name"
          var src = document.getElementById("mainImage");
          src.appendChild(img);
        </script>
      </div>
      <div class="col col-sm-6 shadow p-3 mb-5 bg-white rounded">
        <h1>
          <script>document.write(movieTitle)</script>
        </h1>
        <div class="row">
          <div class="col">Rating: <script>document.write(movieRating)</script></div>
          <div class="col">Release: <script>document.write(movieYear)</script></div>
          <div class="col"><script>document.write(movieRuntime)</script></div>
          <div class="col">Score: <script>document.write(movieReview)</script></div>
        </div>
        <form action="#" method="get" id="buttonsForPurchase">
          <script>
            localStorage.setItem('loggedIn', 'false')
            const buttons = document.getElementById('buttonsForPurchase')
            if (localStorage.getItem('loggedIn') === 'true'){
              const streamButton = document.createElement('BUTTON')
              streamButton.setAttribute('class', 'btn btn-danger buy')
              streamButton.setAttribute('type', 'submit')
              streamButton.innerText = 'Stream Now'
              streamButton.setAttribute('formaction', '/se-projects/account/stream.html')
              buttons.appendChild(streamButton)
            } else {
              const rentButton = document.createElement('BUTTON')
              rentButton.setAttribute('class', 'btn btn-danger buy')
              rentButton.setAttribute('type', 'submit')
              rentButton.innerText = 'Rent for $' + movieRent
              rentButton.setAttribute('formaction', '/se-projects/checkout.html')
              buttons.appendChild(rentButton)
              const buyButton = document.createElement('BUTTON')
              buyButton.setAttribute('class', 'btn btn-danger buy')
              buyButton.setAttribute('type', 'submit')
              buyButton.innerText = 'Buy for $' + movieBuy
              buyButton.setAttribute('formaction', '/se-projects/checkout.html')
              buttons.appendChild(buyButton)
            }
          </script>
        </form>
        <div><b>Genres:</b> <script>document.write(movieGenre)</script></div>
        <div><b>Cast:</b> <script>document.write(movieActors)</script><br><br> </div>
        <div><b>Director:</b> <script>document.write(movieDirector)</script></div>
        <div><b>Overview:</b> <script>document.write(moviePlot)</script><br><br><br><br></div>
        <div class="float-right"><a class="dashed" href="javascript:history.back()">&lt;&lt; back to search results</a></div>
      </div>
    </div>

    <h4>Similar movies</h4>
    <div id="similarMovies"></div>
    <script src="similarImpl.js"></script>
    <script>getMovies(movieGenre)</script>
    
  </div>

  <!-- Default Footer with links from mmax.js-->
  <div id="footer" class="row justify-content-*-center"></div>

  <script>
    document.getElementById("header").innerHTML = header;
    document.getElementById("footer").innerHTML = footer;
  </script>

</body>

</html>
